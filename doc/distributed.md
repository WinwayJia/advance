##### 分布式与集群的区别

`分布式`:  一个业务拆分成多个子业务，部署在不同的服务器上

`集群`： 同一个业务，部署在多个服务器上

例如：电商系统可以拆分成商品，订单，用户等子系统。这就是分布式，而为了应对并发，同时部署好几个用户系统，这就是集群。

```flow
single=>start: 单应用架构(应用&数据服务)
seperate=>operation: 应用服务器和数据服务器分离
cluster=>operation: 应用服务器做集群

single(right)->seperate(right)->cluster
```

单机负载越来越难，所以要将应用服务器和数据库服务器分离，每个系统的处理能力是有限的，为了提高并发访问量，需要对应用服务器做集群。

这是会涉及两个问题：

- 负载均衡
  - DNS
    DNS是最简单也是最常见的负载均衡方式，一般用来实现地理级别的均衡。例如，北方的用户访问北京的机房，南方的用户访问广州的机房。一般不会使用DNS来做机器级别的负载均衡，因为太耗费IP资源了。例如，百度搜索可能要10000台以上的机器，不可能将这么多机器全部配置公网IP，然后用DNS来做负载均衡。
  - Nginx&LVS&F5
    Nginx&LVS&F5用于同一地点内机器级别的负载均衡。其中Nginx是软件的7层负载均衡，LVS是内核的4层负载均衡，F5是硬件做4层负载均衡，性能从低到高位Nginx<LVS<F5
  - 
- session共享
  - session sticky
    将请求都落到同一个服务器上，如Nginx的url hash
  - session replication
    session复制，每台服务器都保存一份相同的session
  - session集中存储
    存储在db、 存储在缓存服务器 （redis）
  - cookie（主流）
    将信息存在加密后的cookie中
